import com.android.build.gradle.internal.LoggerWrapper
import com.android.build.gradle.internal.SdkHandler

apply plugin: 'java'
apply plugin: 'com.novoda.bintray-release'
apply from: 'https://raw.githubusercontent.com/HendraAnggrian/hendraanggrian.github.io/master/bintray.gradle'

sourceCompatibility = versions.java
targetCompatibility = versions.java

for (File file : new SdkHandler(project, new LoggerWrapper(project.logger)).sdkLoader.repositories) {
    repositories.maven {
        url = file.toURI()
    }
}

dependencies {
    compile project(':bundler-annotations')
    compile "com.squareup:javapoet:$versions.javapoet"
    compile "com.google.auto:auto-common:$versions.google.auto.common"

    compileOnly "com.android.support:support-annotations:$versions.support"
    compileOnly "com.google.auto.service:auto-service:$versions.google.auto.service"

    testCompile "junit:junit:$versions.junit"
}

publish {
    userOrg = bintray.user
    groupId = bintray.group
    artifactId = bintray.artifact.bundler.id + '-compiler'
    publishVersion = versions.release
    desc = bintray.artifact.bundler.desc
    website = bintray.artifact.bundler.website
}